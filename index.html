<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Échelle de Kern - Dépendance au Sport</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }

        .container {
            max-width: 600px;
            margin: 20px auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        h1, h2 {
            text-align: center;
        }

        .intro {
            text-align: justify;
            font-size: 14px;
        }

        .question {
            margin-bottom: 15px;
        }

        .hidden {
            display: none;
        }

        button {
            display: block;
            width: 100%;
            padding: 10px;
            margin-top: 15px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
        }

        button:hover {
            background: #218838;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Échelle de Kern - Dépendance au Sport</h1>
        <p class="intro">
            Ce questionnaire évalue votre relation avec le sport à travers 21 questions. 
            Sélectionnez la réponse qui correspond le mieux à votre ressenti.
        </p>
        
        <form id="quiz-form">
            <div id="questions-container"></div>
            <button type="button" onclick="calculateResults()">Soumettre</button>
        </form>

        <div id="results" class="hidden">
            <h2>Résultats</h2>
            <p id="result-text"></p>
        </div>

        <div id="info-form" class="hidden">
            <h2>Informations personnelles</h2>
            <label>Nom : <input type="text" id="nom"></label>
            <label>Prénom : <input type="text" id="prenom"></label>
            <label>Date : <input type="text" id="date" readonly></label>
            <button onclick="window.print()">À Imprimer</button>
        </div>
    </div>

    <script>
        const questions = [
            "Je pense à l'exercice physique tout au long de la journée.",
            "J'augmente régulièrement la durée de mes séances d'exercice.",
            "J'ai du mal à réduire la fréquence de mon exercice.",
            "Si je ne fais pas d'exercice, je ressens des symptômes de manque.",
            "J’ai des conflits avec mon entourage à cause de mon exercice physique.",
            "Je fais plus d'exercice que ce que j'avais prévu initialement.",
            "Si je réduis mon volume d'entraînement, je ressens une envie irrésistible de le reprendre.",
            "Je privilégie l'exercice à d'autres activités sociales ou professionnelles.",
            "Lorsque je fais moins d'exercice, je ressens des effets négatifs sur mon humeur.",
            "J'augmente l'intensité de mon entraînement pour ressentir les mêmes effets.",
            "Même lorsque je veux arrêter de m'entraîner, je continue.",
            "Je ressens une perte de contrôle sur ma pratique du sport.",
            "J'ai déjà menti sur la quantité d'exercice que je fais.",
            "J'ai besoin de faire plus d'exercice pour ressentir les mêmes bienfaits qu'auparavant.",
            "Si je ne peux pas m'entraîner, je ressens un mal-être.",
            "Je ressens une culpabilité ou une anxiété lorsque je ne m'entraîne pas.",
            "Je continue mon exercice même si cela cause des blessures ou des problèmes de santé.",
            "Je fais de l'exercice au détriment de mes obligations (travail, famille, études).",
            "Mon entourage s'inquiète de ma pratique excessive du sport.",
            "J'organise mon emploi du temps principalement en fonction de mes séances de sport.",
            "J'éprouve du plaisir et du soulagement seulement après avoir fait de l'exercice."
        ];

        const categories = {
            "Tolérance": [1, 10, 14],
            "Sevrage": [4, 7, 9, 15],
            "Perte de contrôle": [3, 6, 11, 12],
            "Intention": [5, 16],
            "Temps": [2, 20],
            "Réduction des autres activités": [8, 18, 19],
            "Continuité": [13, 17, 21]
        };

        function createQuestions() {
            const container = document.getElementById("questions-container");

            questions.forEach((q, index) => {
                let questionDiv = document.createElement("div");
                questionDiv.classList.add("question");
                questionDiv.innerHTML = `<p>${index + 1}. ${q}</p>`;
                
                for (let i = 1; i <= 6; i++) {
                    questionDiv.innerHTML += `
                        <label>
                            <input type="radio" name="q${index}" value="${i}" required> ${i}
                        </label>
                    `;
                }
                
                container.appendChild(questionDiv);
            });
        }

        function calculateResults() {
            let scores = {};
            Object.keys(categories).forEach(cat => scores[cat] = []);

            let missingAnswers = false;

            questions.forEach((_, index) => {
                let selected = document.querySelector(`input[name="q${index}"]:checked`);
                if (!selected) {
                    missingAnswers = true;
                    return;
                }

                let value = parseInt(selected.value);
                Object.keys(categories).forEach(cat => {
                    if (categories[cat].includes(index + 1)) {
                        scores[cat].push(value);
                    }
                });
            });

            if (missingAnswers) {
                alert("Veuillez répondre à toutes les questions.");
                return;
            }

            let resultText = "";
            Object.keys(scores).forEach(cat => {
                let avg = scores[cat].reduce((a, b) => a + b, 0) / scores[cat].length;
                resultText += `<strong>${cat} :</strong> ${avg.toFixed(2)}<br>`;
            });

            document.getElementById("result-text").innerHTML = resultText;
            document.getElementById("results").classList.remove("hidden");
            document.getElementById("info-form").classList.remove("hidden");
            document.getElementById("date").value = new Date().toLocaleDateString();
        }

        window.onload = createQuestions;
    </script>
</body>
</html>
